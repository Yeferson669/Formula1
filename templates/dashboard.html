{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto px-6 mt-10">
    
    <h1 class="text-4xl font-extrabold text-center text-red-600 mb-10 tracking-wide">
        Dashboard Fórmula 1
    </h1>

    
    <section class="mb-8">
        <h2 class="text-lg font-semibold text-red-500 mb-3">Pilotos por escudería</h2>
        <div class="bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition">
            <canvas id="pilotosPorEscuderia"></canvas>
        </div>
    </section>

    
    <section class="mb-8">
        <h2 class="text-lg font-semibold text-red-500 mb-3">Tiempos promedio por circuito</h2>
        <div class="bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition">
            <canvas id="tiemposPorCircuito"></canvas>
        </div>
    </section>

    
    <section class="mb-8">
        <h2 class="text-lg font-semibold text-red-500 mb-3">Pilotos por nacionalidad</h2>
        <div class="bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition">
            <canvas id="pilotosPorNacionalidad"></canvas>
        </div>
    </section>

    
    <section class="mb-8">
        <h2 class="text-lg font-semibold text-red-500 mb-3">Estado de escuderías</h2>
        <div class="bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition">
            <canvas id="escuderiasStatus"></canvas>
        </div>
    </section>

    
    <section class="mb-8">
        <h2 class="text-lg font-semibold text-red-500 mb-3">Longitudes de circuitos</h2>
        <div class="bg-white p-4 rounded-xl shadow-md hover:shadow-lg transition">
            <canvas id="longitudesCircuitos"></canvas>
        </div>
    </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    
    const escuderias = {{ escuderias | safe }};
    const pilotos_count = {{ pilotos_count | safe }};
    const circuitos = {{ circuitos | safe }};
    const tiempos_promedio = {{ tiempos_promedio | safe }};
    const nacionalidades_labels = {{ nacionalidades_labels | safe }};
    const nacionalidades_data = {{ nacionalidades_data | safe }};
    const escuderias_status_labels = {{ escuderias_status_labels | safe }};
    const escuderias_status_data = {{ escuderias_status_data | safe }};
    const longitudes = {{ longitudes | safe }};

    
    new Chart(document.getElementById('pilotosPorEscuderia'), {
        type: 'bar',
        data: {
            labels: escuderias,
            datasets: [{
                label: 'Número de pilotos',
                data: pilotos_count,
                backgroundColor: 'rgba(225,6,0,0.7)'
            }]
        },
        options: { responsive: true, plugins: { legend: { display: false } } }
    });

    
    new Chart(document.getElementById('tiemposPorCircuito'), {
        type: 'line',
        data: {
            labels: circuitos,
            datasets: [{
                label: 'Tiempo Promedio (segundos)',
                data: tiempos_promedio,
                borderColor: '#00ffcc',
                backgroundColor: 'rgba(0,255,204,0.2)',
                fill: true
            }]
        },
        options: { responsive: true }
    });

    
    new Chart(document.getElementById('pilotosPorNacionalidad'), {
        type: 'pie',
        data: {
            labels: nacionalidades_labels,
            datasets: [{
                data: nacionalidades_data,
                backgroundColor: ['#FF6384','#36A2EB','#FFCE56','#4BC0C0','#9966FF']
            }]
        },
        options: { responsive: true }
    });

    
    new Chart(document.getElementById('escuderiasStatus'), {
        type: 'doughnut',
        data: {
            labels: escuderias_status_labels,
            datasets: [{
                data: escuderias_status_data,
                backgroundColor: ['#2ecc71','#e74c3c']
            }]
        },
        options: { responsive: true }
    });

    
    new Chart(document.getElementById('longitudesCircuitos'), {
        type: 'bar',
        data: {
            labels: circuitos,
            datasets: [{
                label: 'Longitud (km)',
                data: longitudes,
                backgroundColor: '#3498db'
            }]
        },
        options: { responsive: true }
    });
</script>
{% endblock %}
